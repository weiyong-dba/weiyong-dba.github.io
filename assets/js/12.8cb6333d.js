(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{458:function(s,a,t){"use strict";t.r(a);var e=t(51),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"linux维护手册"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux维护手册"}},[s._v("#")]),s._v(" Linux维护手册")]),s._v(" "),t("h2",{attrs:{id:"查看服务器性能"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看服务器性能"}},[s._v("#")]),s._v(" 查看服务器性能")]),s._v(" "),t("p",[t("strong",[s._v("uptime")])]),s._v(" "),t("blockquote",[t("p",[s._v("00:59:34 up 20 days, 14:00, 2 user, load average: 0.55, 0.57, 0.84")])]),s._v(" "),t("p",[s._v("上面命令显示示最近1 分钟内系统的平均负载是0.55，在最近5分钟内系统的平均负载是0.57，在最近的15 分钟内系统的平均负载是0.84。一共两个用户。")]),s._v(" "),t("p",[t("strong",[s._v("cat /proc/loadavg")])]),s._v(" "),t("blockquote",[t("p",[s._v("1.54 1.03 0.94 1/285 28156")])]),s._v(" "),t("p",[s._v("返回数据的含义是：1秒钟平均负载；5秒钟平均负载；15秒钟平均负载；总作业数；正在运行的作业总数。")]),s._v(" "),t("p",[t("strong",[s._v("cat /proc/stat")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("cpu 119560393 366 75934979 491196419 22949796 273570 1653811 0\ncpu0 24181069 1 18320054 132965211 2407486 3 18623 0\ncpu1 27984558 11 21594016 126044599 2248274 0 20895 0\ncpu2 27843845 349 21307705 116391192 12214581 35726 98960 0\ncpu3 39550920 3 14713203 115795416 6079453 237839 1515332 0\nintr 2741402899 1779118189 2 0 0 2 0 3 0 1 1 0 0\nctxt 7985896352\nbtime 1217386758\nprocesses 1161591\nprocs_running 1\nprocs_blocked 0\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[s._v("返回的数据的含义如下：")]),s._v(" "),t("ul",[t("li",[s._v("前五行是CPU时间=user+system+nice+idle+iowait+irq+softirq（具体可以查看后面提供的备注）")]),s._v(" "),t("li",[s._v("“intr”这行给出中断的信息，第一个为自系统启动以来，发生的所有的中断的次数；然后每个数对应一个特定的中断自系统启动以来所发生的次数。")]),s._v(" "),t("li",[s._v("“ctxt”给出了自系统启动以来CPU发生的上下文交换的次数。")]),s._v(" "),t("li",[s._v("“btime”给出了从系统启动到现在为止的时间，单位为秒。")]),s._v(" "),t("li",[s._v("“processes (total_forks) 自系统启动以来所创建的任务的个数目。")]),s._v(" "),t("li",[s._v("“procs_running”：当前运行队列的任务的数目。")]),s._v(" "),t("li",[s._v("“procs_blocked”：当前被阻塞的任务的数目。")])]),s._v(" "),t("p",[t("strong",[s._v("备注:")])]),s._v(" "),t("p",[s._v("user+system+nice+idle+iowait+irq+softirq的含义是：")]),s._v(" "),t("ul",[t("li",[s._v("user 从系统启动开始累计到当前时刻，用户态的CPU时间（单位：jiffies） ，不包含 nice值为负进程。1 jiffies=0.01秒")]),s._v(" "),t("li",[s._v("nice 从系统启动开始累计到当前时刻，nice值为负的进程所占用的CPU时间（单位：jiffies）")]),s._v(" "),t("li",[s._v("system 从系统启动开始累计到当前时刻，核心时间（单位：jiffies）")]),s._v(" "),t("li",[s._v("idle 从系统启动开始累计到当前时刻，除硬盘IO等待时间以外其它等待时间（单位：jiffies）")]),s._v(" "),t("li",[s._v("iowait 从系统启动开始累计到当前时刻，硬盘IO等待时间（单位：jiffies）")]),s._v(" "),t("li",[s._v("irq 从系统启动开始累计到当前时刻，硬中断时间（单位：jiffies）")]),s._v(" "),t("li",[s._v("softirq 从系统启动开始累计到当前时刻，软中断时间（单位：jiffies）")])]),s._v(" "),t("h2",{attrs:{id:"linux运行级别"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux运行级别"}},[s._v("#")]),s._v(" linux运行级别")]),s._v(" "),t("p",[s._v("init 运行级别")]),s._v(" "),t("ul",[t("li",[s._v("0 --\x3e关机")]),s._v(" "),t("li",[s._v("1 --\x3e 单用户")]),s._v(" "),t("li",[s._v("2 --\x3e 多用户没有网络服务")]),s._v(" "),t("li",[s._v("3 --\x3e 多用户有网络服务")]),s._v(" "),t("li",[s._v("4 --\x3e 系统未使用保留给用户")]),s._v(" "),t("li",[s._v("5 --\x3e 图形界面")]),s._v(" "),t("li",[s._v("6 --\x3e 重启")])]),s._v(" "),t("h2",{attrs:{id:"查看cpu信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看cpu信息"}},[s._v("#")]),s._v(" 查看CPU信息")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("cat /proc/cpuinfo\n")])])]),t("h2",{attrs:{id:"查看内存信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看内存信息"}},[s._v("#")]),s._v(" 查看内存信息")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("cat /proc/meminfo\n")])])]),t("h2",{attrs:{id:"查看硬盘信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看硬盘信息"}},[s._v("#")]),s._v(" 查看硬盘信息")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("fdisk -l\nlsblk\n")])])]),t("h2",{attrs:{id:"统计文件句柄数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#统计文件句柄数"}},[s._v("#")]),s._v(" 统计文件句柄数")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("more   /proc/sys/fs/file-nr\nlsof -n | awk '{print $2}' | sort | uniq -c | sort -nr\n")])])]),t("h2",{attrs:{id:"增加swap分区大小"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#增加swap分区大小"}},[s._v("#")]),s._v(" 增加Swap分区大小")]),s._v(" "),t("p",[s._v("1、检查当前的分区情况:")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("[root@localhost]#free -m\n")])])]),t("p",[s._v("2、增加交换分区文件及大小，如果要增加2G大小的交换分区，则命令写法如下，其中的 count 等于想要的块大小。")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("[root@localhost]# dd if=/dev/zero of=/home/swap bs=1024 count=2048000\n")])])]),t("p",[s._v("3、设置交换文件：")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("[root@localhost]# mkswap /home/swap\n")])])]),t("p",[s._v("4、立即启用交换分区文件")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v(" [root@localhost]# swapon /home/swap \n")])])]),t("p",[s._v("5、如果要在引导时自动启用，则编辑 /etc/fstab 文件，添加行：")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("/home/swap swap swap defaults 0 0\n")])])]),t("h2",{attrs:{id:"列出占所有进出的swap使用情况"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#列出占所有进出的swap使用情况"}},[s._v("#")]),s._v(" 列出占所有进出的swap使用情况")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" ax "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"s/^ *//"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /tmp/ps_ax.output\n "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("x")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" Swap /proc/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("-9"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("*/smaps "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -v "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0 kB'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tr")]),s._v(" -s "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("' '")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cut")]),s._v(" -d"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("' '")]),s._v(" -f-2 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sort")]),s._v(" -t"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("' '")]),s._v(" -k2 -n "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tr")]),s._v(" -d "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("' '")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tail")]),s._v(" -10"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("swapusage")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" $x "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cut")]),s._v(" -d: -f3"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("pid")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" $x "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cut")]),s._v(" -d/ -f3"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("procname")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /tmp/ps_ax.output "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" ^$pid"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"============================"')]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Process : '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$procname")]),s._v('"')]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Swap usage: '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$swapusage")]),s._v(' kB"')]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h2",{attrs:{id:"一行命令修改用户密码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一行命令修改用户密码"}},[s._v("#")]),s._v(" 一行命令修改用户密码")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("echo password | passwd --stdin root\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"磁盘分区"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#磁盘分区"}},[s._v("#")]),s._v(" 磁盘分区")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("parted")]),s._v(" -s /dev/sdb print \n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("parted")]),s._v(" -s /dev/sdb mklabel gpt\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("parted")]),s._v(" -s /dev/sdb mkpart  primary  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("%\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("parted")]),s._v(" -s /dev/sdb print \n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" mkfs.xfs -f /dev/sdb1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h2",{attrs:{id:"磁盘读写测试"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#磁盘读写测试"}},[s._v("#")]),s._v(" 磁盘读写测试")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("time dd if=/dev/zero of=a bs=1M count=5000 oflag=direct\ntime dd if=a of=/dev/null bs=1M count=5000 iflag=direct\nfio -filename=/home/test.dat -direct=1 -iodepth 1 -thread -rw=randrw -rwmixread=70 -ioengine=psync -bs=16k -size=10G -numjobs=30 -runtime=100 -group_reporting -name=mytest1\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h2",{attrs:{id:"keepalived配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#keepalived配置"}},[s._v("#")]),s._v(" keepalived配置")]),s._v(" "),t("p",[s._v("配置文件 "),t("strong",[s._v("/etc/keepalived/keepalived.conf")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("vrrp_instance VI_1 {\n    state BACKUP\n    nopreempt\n    interface eth0\n    virtual_router_id 6\n    priority 100\n    advert_int 1\n    authentication {\n        auth_type PASS\n        auth_pass mypassXXX\n    }\n    virtual_ipaddress {\n        172.0.0.6/17\n     #master 172.0.0.4\n     #backup 172.0.0.5\n    }\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("p",[t("strong",[s._v("注：")])]),s._v(" "),t("blockquote",[t("p",[s._v("virtual_router_id 6")])]),s._v(" "),t("p",[s._v("6这个编号不能重复，可以用这条命令来查看该网络中已存在的vrid")]),s._v(" "),t("blockquote",[t("p",[s._v("tcpdump -nn -i any net 224.0.0.0/8")])]),s._v(" "),t("h2",{attrs:{id:"删除docker网卡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除docker网卡"}},[s._v("#")]),s._v(" 删除docker网卡")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ifconfig")]),s._v(" docker0 down\nbrctl delbr docker0\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"iptables"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#iptables"}},[s._v("#")]),s._v(" iptables")]),s._v(" "),t("ul",[t("li",[s._v("iptables -A INPUT -d 172.2.0.11 -s 172.2.0.10 -j REJECT")]),s._v(" "),t("li",[s._v("iptables -A OUTPUT -d 172.2.0.11 -s 172.2.0.10 -j REJECT")]),s._v(" "),t("li",[s._v("iptables -L INPUT|OUTPUT --line-numbers")]),s._v(" "),t("li",[s._v("iptables -D INPUT 1")]),s._v(" "),t("li",[s._v("iptables -A INPUT -s 10.0.0.2/32,10.0.0.3/32,127.0.0.1/8 -p tcp --dport 6379 -j ACCEPT")]),s._v(" "),t("li",[s._v("iptables -A INPUT -p tcp --dport 6379 -j DROP")])]),s._v(" "),t("h2",{attrs:{id:"端口扫描"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#端口扫描"}},[s._v("#")]),s._v(" 端口扫描")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('#!/bin/bash\nip_addr=($(cat hosts.txt))\nfor m in ${ip_addr[@]}\ndo\n\tfor ((i=6379;i<=6500;i++))\n      do\n        (sleep 1;)|telnet $threeIP$i $2 2>&1 |grep "Connected to $threeIP$i">/dev/null \n        nc -z -v $m $i 2>&1 | grep Connected\n        if [ $? -eq 0 ]\n        then\n          echo "host:$m open $i port!"\n        else\n          echo "host:$m close $i port!"         \n        fi\n      done\ndone\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("h2",{attrs:{id:"rpm包提取"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rpm包提取"}},[s._v("#")]),s._v(" RPM包提取")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("rpm2cpio madlib-1.16-1.x86_64.rpm | cpio -div\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"让进程在后台运行更可靠的几种方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#让进程在后台运行更可靠的几种方法"}},[s._v("#")]),s._v(" 让进程在后台运行更可靠的几种方法")]),s._v(" "),t("p",[s._v("nohup/setsid 无疑是临时需要时最方便的方法，disown 能帮助我们来事后补救当前已经在运行了的作业，而 screen 则是在大批量操作时不二的选择了。")]),s._v(" "),t("ol",[t("li",[s._v("nohup bash a.sh &")]),s._v(" "),t("li",[s._v("setsid ping www.ibm.com &")]),s._v(" "),t("li",[s._v("(ping www.ibm.com &)")]),s._v(" "),t("li",[s._v("disown")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("* 用disown -h jobspec来使某个作业忽略HUP信号。\n* 用disown -ah 来使所有的作业都忽略HUP信号。\n* 用disown -rh 来使正在运行的作业忽略HUP信号。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ol",{attrs:{start:"5"}},[t("li",[s._v("screen")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("* 用screen -dmS session name来建立一个处于断开模式下的会话（并指定其会话名）。\n* 用screen -list 来列出所有会话。\n* 用screen -r session name来重新连接指定会话。\n* 用快捷键CTRL-a d 来暂时断开当前会话。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h2",{attrs:{id:"在crontab中运行screen"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在crontab中运行screen"}},[s._v("#")]),s._v(" 在crontab中运行screen")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("24 3 * * * screen -ls | grep backup || screen -dmS backup && screen -S backup -s /usr/bin/bash -X stuff '/opt/my.sh> /dev/null 3>&1'`echo -ne '\\015'` > /dev/null 2>&1\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"硬件性能"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#硬件性能"}},[s._v("#")]),s._v(" 硬件性能")]),s._v(" "),t("h3",{attrs:{id:"cpu"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cpu"}},[s._v("#")]),s._v(" CPU")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("sysbench --test=cpu --cpu-max-prime=20000 run\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"disk-io"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#disk-io"}},[s._v("#")]),s._v(" DISK IO")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("* 写\n\t* 有cache - `dd if=/dev/zero of=/tmp/test.dd bs=1G count=10`\n\t* 无cache - `dd if=/dev/zero of=/tmp/test.dd bs=1G count=10 conv=fsync`\n* 读\n\t* cache - `hdparm -t /dev/sdb1`\n\t* 无cache - `hdparm -T /dev/sdb1`\n* 禁用write cache\n    * dparm -W0 /dev/sdb1\n    * hdparm -W0 /dev/sdc2\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h3",{attrs:{id:"network"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#network"}},[s._v("#")]),s._v(" Network")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("* 目标机器 - `iperf3 -s`\n* 本机 - `ipef3 -c $ip -n 100G`\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"ue文本替换"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ue文本替换"}},[s._v("#")]),s._v(" UE文本替换")]),s._v(" "),t("ol",[t("li",[s._v('如果是UNIX格式，替换^n^n为^n, 或者替换"^?n?$" 为空（""）')]),s._v(" "),t("li",[s._v("如果是DOS格式，特换^r^n^r^n为^r^n,")]),s._v(" "),t("li",[s._v("一般文本替换 ^p$为空")]),s._v(" "),t("li",[s._v("再尝试一下将^p^p替换为^p")]),s._v(" "),t("li",[s._v("只要尝试^r^n^p的多种组合，将两个序列替换为一个序列")]),s._v(" "),t("li",[s._v('替换"\\n\\s*\\r"(不用引号)替换为空。适用于从网页上copy过来的文字，在txt中编辑')])]),s._v(" "),t("h2",{attrs:{id:"安装开发包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装开发包"}},[s._v("#")]),s._v(" 安装开发包")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('yum groupinstall "Development Tools"\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"解决df卡死的问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解决df卡死的问题"}},[s._v("#")]),s._v(" 解决df卡死的问题")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("systemctl restart proc-sys-fs-binfmt_misc.automount\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);