(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{459:function(s,a,e){"use strict";e.r(a);var t=e(51),n=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"使用iotune测试磁盘读写"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用iotune测试磁盘读写"}},[s._v("#")]),s._v(" 使用iotune测试磁盘读写")]),s._v(" "),e("h2",{attrs:{id:"前言"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),e("p",[s._v("scylladb自带的iotune包可以方便的帮助我们了解磁盘的读写效率，测试磁盘的读写带宽及IOPS。")]),s._v(" "),e("h2",{attrs:{id:"安装scylladb"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装scylladb"}},[s._v("#")]),s._v(" 安装scylladb")]),s._v(" "),e("p",[s._v("详见"),e("RouterLink",{attrs:{to:"/2019/09/25/scylla-install/"}},[s._v("Centos7下安装scylladb集群")])],1),s._v(" "),e("h2",{attrs:{id:"磁盘io测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#磁盘io测试"}},[s._v("#")]),s._v(" 磁盘IO测试")]),s._v(" "),e("ul",[e("li",[s._v("测试当前目录 - 执行"),e("code",[s._v("scylla_io_setup")]),s._v("。")]),s._v(" "),e("li",[s._v("测试指定目录 - "),e("code",[s._v("iotune --evaluation-directory /data6 --format envfile")])])]),s._v(" "),e("h2",{attrs:{id:"测试结果"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#测试结果"}},[s._v("#")]),s._v(" 测试结果")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("tuning /sys/devices/pci0000:00/0000:00:05.0/virtio2/block/vda/vda1\ntuning /sys/devices/pci0000:00/0000:00:05.0/virtio2/block/vda\ntuning: /sys/devices/pci0000:00/0000:00:05.0/virtio2/block/vda/queue/nomerges 2\nINFO  2019-11-13 11:14:00,179 [shard 0] iotune - /var/lib/scylla/data passed sanity checks\nWARN  2019-11-13 11:14:00,180 [shard 0] iotune - Scheduler for /sys/devices/pci0000:00/0000:00:05.0/virtio2/block/vda/queue/scheduler set to mq-deadline. It is recommend to set it to noop before evaluation so as not to skew the results.\nMeasuring sequential write bandwidth: 77 MB/s\nMeasuring sequential read bandwidth: 80 MB/s\nMeasuring random write IOPS: 505 IOPS\nMeasuring random read IOPS: 501 IOPS\nRecommended --num-io-queues: 1\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);